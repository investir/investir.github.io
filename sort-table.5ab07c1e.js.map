{"version":3,"sources":["js/sort-table.js"],"names":["sortTable","Table","col","dir","sortClass","i","sortCol","className","match","replace","RegExp","sortDir","tHead","rows","length","cells","getAttribute","sortFunc","querySelectorAll","forEach","Node","TBody","tBodies","sort","compareRow","firstChild","removeChild","appendChild","RowA","RowB","valA","valB","stripTags","html","date","Cell","okDate","kDate","innerHTML","getTime","Date","number","Number","string","toLowerCase","raw","last","split","pop","input","children","value","none","getClickHandler","init","THead","Tables","Handler","document","getElementsByTagName","attributes","createElement","insertBefore","rowNum","cellNum","colNum","setAttribute","window","addEventListener","attachEvent","colSpan","element","head","childNodes","sheet","insertRule","NodeList","prototype","Array"],"mappings":"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","file":"sort-table.5ab07c1e.js","sourceRoot":"../src","sourcesContent":["/**\n * sort-table.js\n * A pure JavaScript (no dependencies) solution to make HTML\n *  Tables sortable\n *\n * Copyright (c) 2013 Tyler Uebele\n * Released under the MIT license.  See included LICENSE.txt\n *  or http://opensource.org/licenses/MIT\n *\n * latest version available at https://github.com/tyleruebele/sort-table\n */\n\n/**\n * Sort the rows in a HTML Table\n *\n * @param Table The Table DOM object\n * @param col   The zero-based column number by which to sort\n * @param dir   Optional. The sort direction; pass 1 for asc; -1 for desc\n * @returns void\n */\nfunction sortTable(Table, col, dir) {\n  var sortClass, i;\n\n  // get previous sort column\n  sortTable.sortCol = -1;\n  sortClass = Table.className.match(/js-sort-\\d+/);\n  if (null != sortClass) {\n      sortTable.sortCol = sortClass[0].replace(/js-sort-/, '');\n      Table.className = Table.className.replace(new RegExp(' ?' + sortClass[0] + '\\\\b'), '');\n  }\n  // If sort column was not passed, use previous\n  if ('undefined' === typeof col) {\n      col = sortTable.sortCol;\n  }\n\n  if ('undefined' !== typeof dir) {\n      // Accept -1 or 'desc' for descending.  All else is ascending\n      sortTable.sortDir = dir == -1 || dir == 'desc' ? -1 : 1;\n  } else {\n      // sort direction was not passed, use opposite of previous\n      sortClass = Table.className.match(/js-sort-(a|de)sc/);\n      if (null != sortClass && sortTable.sortCol == col) {\n          sortTable.sortDir = 'js-sort-asc' == sortClass[0] ? -1 : 1;\n      } else {\n          sortTable.sortDir = 1;\n      }\n  }\n  Table.className = Table.className.replace(/ ?js-sort-(a|de)sc/g, '');\n\n  // update sort column\n  Table.className += ' js-sort-' + col;\n  sortTable.sortCol = col;\n\n  // update sort direction\n  Table.className += ' js-sort-' + (sortTable.sortDir == -1 ? 'desc' : 'asc');\n\n  // get sort type\n  if (col < Table.tHead.rows[Table.tHead.rows.length - 1].cells.length) {\n      sortClass = Table.tHead.rows[Table.tHead.rows.length - 1].cells[col].className.match(/js-sort-[-\\w]+/);\n  }\n  // Improved support for colspan'd headers\n  for (i = 0; i < Table.tHead.rows[Table.tHead.rows.length - 1].cells.length; i++) {\n      if (col == Table.tHead.rows[Table.tHead.rows.length - 1].cells[i].getAttribute('data-js-sort-colNum')) {\n          sortClass = Table.tHead.rows[Table.tHead.rows.length - 1].cells[i].className.match(/js-sort-[-\\w]+/);\n      }\n  }\n  if (null != sortClass) {\n      sortTable.sortFunc = sortClass[0].replace(/js-sort-/, '');\n  } else {\n      sortTable.sortFunc = 'string';\n  }\n  // Set the headers for the active column to have the decorative class\n  Table.querySelectorAll('.js-sort-active').forEach(function(Node) {\n      Node.className = Node.className.replace(/ ?js-sort-active\\b/, '');\n  });\n  Table.querySelectorAll('[data-js-sort-colNum=\"' + col + '\"]:not(:empty)').forEach(function(Node) {\n      Node.className += ' js-sort-active';\n  });\n\n  // sort!\n  var rows = [],\n      TBody = Table.tBodies[0];\n\n  for (i = 0; i < TBody.rows.length; i++) {\n      rows[i] = TBody.rows[i];\n  }\n  if ('none' != sortTable.sortFunc) {\n      rows.sort(sortTable.compareRow);\n  }\n\n  while (TBody.firstChild) {\n      TBody.removeChild(TBody.firstChild);\n  }\n  for (i = 0; i < rows.length; i++) {\n      TBody.appendChild(rows[i]);\n  }\n}\n\n/**\n* Compare two table rows based on current settings\n*\n* @param RowA A TR DOM object\n* @param RowB A TR DOM object\n* @returns {number} 1 if RowA is greater, -1 if RowB, 0 if equal\n*/\nsortTable.compareRow = function(RowA, RowB) {\n  var valA, valB;\n  if ('function' != typeof sortTable[sortTable.sortFunc]) {\n      sortTable.sortFunc = 'string';\n  }\n  valA = sortTable[sortTable.sortFunc](RowA.cells[sortTable.sortCol]);\n  valB = sortTable[sortTable.sortFunc](RowB.cells[sortTable.sortCol]);\n\n  return valA == valB ? 0 : sortTable.sortDir * (valA > valB ? 1 : -1);\n};\n\n/**\n* Strip all HTML, no exceptions\n* @param html\n* @returns {string}\n*/\nsortTable.stripTags = function(html) {\n  return html.replace(/<\\/?[a-z][a-z0-9]*\\b[^>]*>/gi, '');\n};\n\n/**\n* Helper function that converts a table cell (TD) to a comparable value\n* Converts innerHTML to a timestamp, 0 for invalid dates\n*\n* @param Cell A TD DOM object\n* @returns {Number}\n*/\nsortTable.date = function(Cell) {\n  // If okDate library is available, Use it for advanced Date processing\n  if (typeof okDate !== 'undefined') {\n      var kDate = okDate(sortTable.stripTags(Cell.innerHTML));\n      return kDate ? kDate.getTime() : 0;\n  } else {\n      return (new Date(sortTable.stripTags(Cell.innerHTML))).getTime() || 0;\n  }\n};\n\n/**\n* Helper function that converts a table cell (TD) to a comparable value\n* Converts innerHTML to a JS Number object\n*\n* @param Cell A TD DOM object\n* @returns {Number}\n*/\nsortTable.number = function(Cell) {\n  return Number(sortTable.stripTags(Cell.innerHTML).replace(/[^-\\d.]/g, ''));\n};\n\n/**\n* Helper function that converts a table cell (TD) to a comparable value\n* Converts innerHTML to a lower case string for insensitive compare\n*\n* @param Cell A TD DOM object\n* @returns {String}\n*/\nsortTable.string = function(Cell) {\n  return sortTable.stripTags(Cell.innerHTML).toLowerCase();\n};\n\n/**\n* Helper function that converts a table cell (TD) to a comparable value\n*\n* @param Cell A TD DOM object\n* @returns {String}\n*/\nsortTable.raw = function(Cell) {\n  return Cell.innerHTML;\n};\n\n/**\n* Helper function that converts a table cell (TD) to a comparable value\n* Captures the last space-delimited token from innerHTML\n*\n* @param Cell A TD DOM object\n* @returns {String}\n*/\nsortTable.last = function(Cell) {\n  return sortTable.stripTags(Cell.innerHTML).split(' ').pop().toLowerCase();\n};\n\n/**\n* Helper function that converts a table cell (TD) to a comparable value\n* Captures the value of the first childNode\n*\n* @param Cell A TD DOM object\n* @returns {String}\n*/\nsortTable.input = function(Cell) {\n  for (var i = 0; i < Cell.children.length; i++) {\n      if ('object' == typeof Cell.children[i]\n          && 'undefined' != typeof Cell.children[i].value\n      ) {\n          return Cell.children[i].value.toLowerCase();\n      }\n  }\n\n  return sortTable.string(Cell);\n};\n\n/**\n* Helper function that prevents sorting by always returning null\n*\n* @param Cell A TD DOM object\n* @returns null\n*/\nsortTable.none = function(Cell) {\n  return null;\n};\n\n/**\n* Return the click handler appropriate to the specified Table and column\n*\n* @param Table Table to sort\n* @param col   Column to sort by\n* @returns {Function} Click Handler\n*/\nsortTable.getClickHandler = function(Table, col) {\n  return function() {\n      sortTable(Table, col);\n  };\n};\n\n/**\n* Attach sortTable() calls to table header cells' onclick events\n* If the table(s) do not have a THead node, one will be created around the\n*  first row\n*/\nsortTable.init = function() {\n  var THead, Tables, Handler;\n  if (document.querySelectorAll) {\n      Tables = document.querySelectorAll('table.js-sort-table');\n  } else {\n      Tables = document.getElementsByTagName('table');\n  }\n\n  for (var i = 0; i < Tables.length; i++) {\n      // Because IE<8 doesn't support querySelectorAll, skip unclassed tables\n      if (!document.querySelectorAll && null === Tables[i].className.match(/\\bjs-sort-table\\b/)) {\n          continue;\n      }\n\n      // Prevent repeat processing\n      if (Tables[i].attributes['data-js-sort-table']) {\n          continue;\n      }\n\n      // Ensure table has a tHead element\n      if (!Tables[i].tHead) {\n          THead = document.createElement('thead');\n          THead.appendChild(Tables[i].rows[0]);\n          Tables[i].insertBefore(THead, Tables[i].children[0]);\n      } else {\n          THead = Tables[i].tHead;\n      }\n\n      // Attach click events to table header\n      for (var rowNum = 0; rowNum < THead.rows.length; rowNum++) {\n          for (var cellNum = 0, colNum = 0; cellNum < THead.rows[rowNum].cells.length; cellNum++) {\n              // Skip headers marked \"js-sort-none\"\n              if (THead.rows[rowNum].cells[cellNum].className.match(/\\bjs-sort-none\\b/)) {\n                  continue;\n              }\n              // Define which column the header should invoke sorting for\n              THead.rows[rowNum].cells[cellNum].setAttribute('data-js-sort-colNum', colNum);\n              Handler = sortTable.getClickHandler(Tables[i], colNum);\n              window.addEventListener\n                  ? THead.rows[rowNum].cells[cellNum].addEventListener('click', Handler)\n                  : window.attachEvent && THead.rows[rowNum].cells[cellNum].attachEvent('onclick', Handler);\n              colNum += THead.rows[rowNum].cells[cellNum].colSpan;\n          }\n      }\n\n      // Mark table as processed\n      Tables[i].setAttribute('data-js-sort-table', 'true')\n  }\n\n  // Add default styles as the first style in head so they can be easily overwritten by user styles\n  var element = document.createElement('style');\n  document.head.insertBefore(element, document.head.childNodes[0]);\n  var sheet = element.sheet;\n  sheet.insertRule('table.js-sort-table.js-sort-asc thead tr > .js-sort-active:not(.js-sort-none):after {content: \"\\\\25b2\";font-size: 0.7em;padding-left: 3px;line-height: 0.7em;}', 0);\n  sheet.insertRule('table.js-sort-table.js-sort-desc thead tr > .js-sort-active:not(.js-sort-none):after {content: \"\\\\25bc\";font-size: 0.7em;padding-left: 3px;line-height: 0.7em;}', 0);\n};\n\n// Run sortTable.init() when the page loads\nwindow.addEventListener\n  ? window.addEventListener('load', sortTable.init, false)\n  : window.attachEvent && window.attachEvent('onload', sortTable.init)\n  ;\n\n// Shim for IE11's lack of NodeList.prototype.forEach\nif (typeof NodeList.prototype.forEach !== \"function\") {\n  NodeList.prototype.forEach = Array.prototype.forEach;\n}\n"]}